<!DOCTYPE html>
<html>

<head>
	<title>CodeStream</title>
	<link rel="dns-prefetch" href="https://images.codestream.com">	
	{{> partial_html_head partial_html_head_model}}
	<script type="text/javascript">
		!function () {
			var analytics = window.analytics = window.analytics || []; if (!analytics.initialize) if (analytics.invoked) window.console && console.error && console.error("Segment snippet included twice."); else {
				analytics.invoked = !0; analytics.methods = ["trackSubmit", "trackClick", "trackLink", "trackForm", "pageview", "identify", "reset", "group", "track", "ready", "alias", "debug", "page", "once", "off", "on"]; analytics.factory = function (t) { return function () { var e = Array.prototype.slice.call(arguments); e.unshift(t); analytics.push(e); return analytics } }; for (var t = 0; t < analytics.methods.length; t++) { var e = analytics.methods[t]; analytics[e] = analytics.factory(e) } analytics.load = function (t, e) { var n = document.createElement("script"); n.type = "text/javascript"; n.async = !0; n.src = "https://cdn.segment.com/analytics.js/v1/" + t + "/analytics.min.js"; var a = document.getElementsByTagName("script")[0]; a.parentNode.insertBefore(n, a); analytics._loadOptions = e }; analytics.SNIPPET_VERSION = "4.1.0";
				analytics.load("{{segmentKey}}");
				analytics.page();
			}
		}();
	</script>

    <style>
        .list-group-item:first-child {
            border:0px !important;
        }
        .list-group-item { 
        padding: 0;    
        background-color: transparent;
        border: 0px}

        .hdr {
            text-transform: uppercase;
    font-weight: 800;
    opacity: 0.5;
    font-size: 11px;
        }

        .group {
            margin-bottom:10px;
        }
        .text {
            color: #c7c7c6;
            display: inline-block;
        }
    </style>
</head>

<body>
	{{{identifyScript}}}
    <script>
		window.analytics.track('Page Viewed', { 'Page Name': 'Review' });
	</script> 
	{{!-- <script>
		history.pushState(null, "CodeStream", location.href.split("?")[0]);
	</script> --}}

	{{> partial_menu partial_menu_model}}

	<div id="alert-wrapper"></div>
	<div class="container-fluid" id="root">
		<div class="row">
			<div class="col-sm-8 offset-sm-2">
				<div class="box-content box-border box-border-sm">				 
					<div class="flex">
						{{#if hasEmailHashOrAuthorInitials}}
						<div class="headshot">
							<img style="position:absolute; z-index:2;" class="headshot-image"
								src="https://www.gravatar.com/avatar/{{emailHash}}?s=20&d=blank" />
							<span class="headshot-initials">{{authorInitials}}</span>
						</div>
						{{/if}}
						<div>
							<div class="posted-on">
								<span class="author">{{username}}</span>
								<span class="time">{{createdAt}}</span>
							</div>
						</div>
					</div>				 
                     
                    <span class="title">{{title}}</span>
                    <br><br>
                    <div class="group">
                        <div class="hdr">Description</div>                         
                        <span class="icon"><svg version="1.1" width="16" height="16" class="octicon octicon-description" aria-hidden="true" viewBox="0 0 24 24"><path d="M 4 3 A 1.0001 1.0001 0 1 0 4 5 L 20 5 A 1.0001 1.0001 0 1 0 20 3 L 4 3 z M 4 7 A 1.0001 1.0001 0 1 0 4 9 L 15 9 A 1.0001 1.0001 0 1 0 15 7 L 4 7 z M 4 11 A 1.0001 1.0001 0 1 0 4 13 L 20 13 A 1.0001 1.0001 0 1 0 20 11 L 4 11 z M 4 15 A 1.0001 1.0001 0 1 0 4 17 L 15 17 A 1.0001 1.0001 0 1 0 15 15 L 4 15 z M 4 19 A 1.0001 1.0001 0 1 0 4 21 L 20 21 A 1.0001 1.0001 0 1 0 20 19 L 4 19 z"></path></svg></span>
                        <span class="text">{{{text}}}</span>
                    </div>
                     <div class="group">
                        <div class="hdr">Status</div>
                        <span class="text">{{status}}</span>                    
                    </div>

                     {{#if hasTagsOrReviewers}}
                    <div class="row no-gutters mt-4">
                        {{#if tags}}
                        <div class="col-sm-6">
                           <div class="hdr">Tags</div>
                        </div>
                        {{/if}}
                        {{#if reviewers}}
                        <div class="col-sm-6">
                           <div class="hdr">Reviewers</div>
                        </div>
                        {{/if}}
                    </div>
                    <div class="row no-gutters mt-1">
                        {{#if tags}}
                            <div class="col-sm-6">
                                {{#tags}}
                                    {{#if label}}
                                    <span class="label label-square" style="background-color:{{color}};">
                                        {{label}}
                                    </span>
                                    {{/if}}
                                    {{^label}}
                                    <span class="label label-square label-empty" style="background-color:{{color}};">
                                        &#8291;
                                    </span>
                                    {{/label}}
                                {{/tags}}
                            </div>
                        {{/if}}
                        {{#if reviewers}}
                        <div class="col-sm-6">
                            {{#reviewers}}
                            <div class="assignee-wrapper">
                                {{#if initials}}
                                <span class="headshot-initials-inline" title="{{tooltip}}">{{initials}}</span>
                                {{/if}}
                                <span title="{{tooltip}}">{{label}}</span>
                            </div>
                            {{/reviewers}}
                        </div>
                        {{/if}}
                    </div>
                    <br>
                    {{/if}}

                    <div class="hdr">Changes</div>
                    {{#each reviewChangesets}}
                        {{#if repoName}}
                            <span class="pr-2">							
                                <span class="monospace repo" title="{{repoName}} repo">
                                    <span class="icon">
                                        <svg version="1.1" width="12" height="16" viewBox="0 0 12 16" class="octicon octicon-repo" aria-hidden="true">
                                            <path fill-rule="evenodd" 
                                                d="M4 9H3V8h1v1zm0-3H3v1h1V6zm0-2H3v1h1V4zm0-2H3v1h1V2zm8-1v12c0 .55-.45 1-1 1H6v2l-1.5-1.5L3 16v-2H1c-.55 0-1-.45-1-1V1c0-.55.45-1 1-1h10c.55 0 1 .45 1 1zm-1 10H1v2h2v-1h3v1h5v-2zm0-10H2v9h9V1z">
                                            </path>
                                            </svg>
                                    </span>
                                    {{repoName}}
                                </span>                        
                            </span>
                        {{/if}}
                        {{#if branchName}}
                            <span class="monospace branch pr-2">
                                <span class="icon">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="10" height="16" viewBox="0 0 10 16">
                                        <path fill-rule="evenodd"
                                            d="M10 5c0-1.11-.89-2-2-2a1.993 1.993 0 0 0-1 3.72v.3c-.02.52-.23.98-.63 1.38-.4.4-.86.61-1.38.63-.83.02-1.48.16-2 .45V4.72a1.993 1.993 0 0 0-1-3.72C.88 1 0 1.89 0 3a2 2 0 0 0 1 1.72v6.56c-.59.35-1 .99-1 1.72 0 1.11.89 2 2 2 1.11 0 2-.89 2-2 0-.53-.2-1-.53-1.36.09-.06.48-.41.59-.47.25-.11.56-.17.94-.17 1.05-.05 1.95-.45 2.75-1.25S8.95 7.77 9 6.73h-.02C9.59 6.37 10 5.73 10 5zM2 1.8c.66 0 1.2.55 1.2 1.2 0 .65-.55 1.2-1.2 1.2C1.35 4.2.8 3.65.8 3c0-.65.55-1.2 1.2-1.2zm0 12.41c-.66 0-1.2-.55-1.2-1.2 0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2 0 .65-.55 1.2-1.2 1.2zm6-8c-.66 0-1.2-.55-1.2-1.2 0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2 0 .65-.55 1.2-1.2 1.2z" />
                                    </svg>
                                </span>
                                {{branchName}}</span>
                        {{/if}}                                  
                        <br><br>
                        <ul class="list-group">
                        {{#each files}}
                            <li class="list-group-item">
                            {{file}} {{#if linesAdded}}<span style="color:#66aa66;">+{{linesAdded}}</span>{{/if}} {{#if linesRemoved}}<span style="color: #cc3366">-{{linesRemoved}}</span>{{/if}}
                            </li>
                        {{/each}}
                        </ul>
                    {{/each}}
                    <br><br>

                    <div class="row no-gutters mt-1 {{#if isLast}}mb-1{{else}}mb-3{{/if}}">      
                        <div class="col-xl-12 col-lg-12 col-md-12 col-sm-12 col-xs-12">     
                            <div class="float-lg-right float-xl-right">                            
                                <div class="btn-group ide-list btn-block-wrap" style="white-space:nowrap;">
                                    <a href="#" class="btn btn-sm dropdown-toggle dropdown-toggle-split form-control"
                                        data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                        <span class="sr-only">Toggle Dropdown</span>
                                    </a>
                                    <div class="dropdown-menu dropdown-menu-right ide-list-items" data-list-items="" data-element-ide-list="">
                                        {{#ides}}
                                            {{#if ideName}}
                                            <a class="dropdown-item" href="#"
                                                data-ide="" 
                                                data-ide-name="{{ideName}}"
                                                data-ide-moniker="{{moniker}}" 
                                                data-ide-protocol="{{protocol}}"
                                                data-ide-download-url="{{downloadUrl}}"
                                                data-repo-id="{{repoId}}"
                                                >{{ideName}}</a>
                                            {{/if}}
                                            {{^ideName}}
                                            <div class="dropdown-divider"></div>
                                            {{/ideName}}
                                        {{/ides}}
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <script>
                        $(function () {
                            $('[data-ide=""]').on('click', function(e) {           
                                window.CODESTREAM.openEditor(e, $(this), 'review', {
                                      id: '{{reviewId}}'
                                });
                            });                                                                            
                        });
                    </script>									 
				</div>
			</div>
		</div>
	</div>
	</div>
 
 	{{> partial_scripts_footer}}
 
	<script>
		$(function () {						 
			window.CODESTREAM.createSelected = function(el) {
				var $thing = $(el.outerHTML).removeClass('dropdown-item')
				.addClass('selected-ide btn btn-sm btn-block form-control btn-open-in')
				.on('click', function(e) {					
					window.CODESTREAM.openEditor(e, $thing, 'review', {
                        id: '{{reviewId}}'
					});
				});
				var html = $thing.html();
				if (html.indexOf('Open in') === -1) {
					html = 'Open in '+html;
				}
				$thing.html(html);
				return $thing;
			}

			window.CODESTREAM.setSelected = function($el) {								 
				$('.ide-list .selected-ide').remove();
				for(var i = 0; i< $('.ide-list').length; i++){
					var $item = $($('.ide-list')[i]);
					$item.prepend(
						window.CODESTREAM.createSelected($el[0])
					)
				}						 
			}          

            var mru = setSelectedFromCookie();			

            var isDefault;
            var launcher = encodeURIComponent('{{queryString.ide}}').replace(/'/g, "''");
            if (launcher) {
                var item;
                if (launcher === "default") {
                    item = mru;
                    isDefault = true;
                }
                else {
                    item = launcher;
                }
                
                var triggered = false;				
                var u = $('[data-list-items]').find('[data-ide-moniker="' + item + '"]');
                if (u && u.length) {						
                    var $item = $(u[0]);			
                    $item.click();

                    triggered = true;
                    console.log('clicked', $item);
                }            
                
                if (!triggered && isDefault) {
                    createMessage("To open this codemark in your IDE, please select from the list below");					 
                }
            }
			if (!mru) {
				var isFirefox = typeof InstallTrigger !== 'undefined';
				if (isFirefox) {
					// only firefox has issues with non-install custom protocols
					createInstallBanner();
				}
			}
		})
	</script>	
</body>
</html>
