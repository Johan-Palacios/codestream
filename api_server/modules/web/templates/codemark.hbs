<!DOCTYPE html>
<html>

<head>
	<title>CodeStream</title>
	<link rel="dns-prefetch" href="https://images.codestream.com">
	<script src="https://cdn.jsdelivr.net/gh/google/code-prettify@master/loader/run_prettify.js"></script>
	{{> partial_html_head partial_html_head_model}}
	<script type="text/javascript">
		!function () {
			var analytics = window.analytics = window.analytics || []; if (!analytics.initialize) if (analytics.invoked) window.console && console.error && console.error("Segment snippet included twice."); else {
				analytics.invoked = !0; analytics.methods = ["trackSubmit", "trackClick", "trackLink", "trackForm", "pageview", "identify", "reset", "group", "track", "ready", "alias", "debug", "page", "once", "off", "on"]; analytics.factory = function (t) { return function () { var e = Array.prototype.slice.call(arguments); e.unshift(t); analytics.push(e); return analytics } }; for (var t = 0; t < analytics.methods.length; t++) { var e = analytics.methods[t]; analytics[e] = analytics.factory(e) } analytics.load = function (t, e) { var n = document.createElement("script"); n.type = "text/javascript"; n.async = !0; n.src = "https://cdn.segment.com/analytics.js/v1/" + t + "/analytics.min.js"; var a = document.getElementsByTagName("script")[0]; a.parentNode.insertBefore(n, a); analytics._loadOptions = e }; analytics.SNIPPET_VERSION = "4.1.0";
				analytics.load("{{segmentKey}}");
				analytics.page();
			}
		}();
	</script>
</head>

<body>
	{{{identifyScript}}}
	<script>
		window.analytics.track('Page Viewed', { 'Page Name': '{{codemarkType}}' });
	</script>
	{{!-- <script>
		history.pushState(null, "CodeStream", location.href.split("?")[0]);
	</script> --}}

	{{> partial_menu partial_menu_model}}

	<div id="alert-wrapper"></div>
	<div class="container-fluid" id="root">
		<div class="row">
			<div class="col-sm-8 offset-sm-2">
				<div class="box-content box-border box-border-sm">
					<div>
						{{#if showComment}}
						<div class="flex">
							{{#if hasEmailHashOrAuthorInitials}}
							<div class="headshot">
								<img style="position:absolute; z-index:2;" class="headshot-image"
									src="https://www.gravatar.com/avatar/{{emailHash}}?s=20&d=blank" />
								<span class="headshot-initials">{{authorInitials}}</span>
							</div>
							{{/if}}
							<div>
								<div class="posted-on">
									<span class="author">{{username}}</span>
									<span class="time">{{createdAt}}</span>
								</div>
							</div>
						</div>
						{{/if}}
						{{#if showComment}}
						{{#if title}}
						<p class="title">{{title}}</p>
						{{/if}}

						{{#if hasTagsOrAssignees}}
						<div class="row no-gutters mt-4">
							{{#if tags}}
							<div class="col-sm-6">
								<h6>TAGS</h6>
							</div>
							{{/if}}
							{{#if assignees}}
							<div class="col-sm-6">
								<h6>ASSIGNEES</h6>
							</div>
							{{/if}}
						</div>
						<div class="row no-gutters mt-0">
							{{#if tags}}
							<div class="col-sm-6">
								{{#tags}}
								{{#if label}}
								<span class="label label-square" style="background-color:{{color}};">
									{{label}}
								</span>
								{{/if}}
								{{^label}}
								<span class="label label-square label-empty" style="background-color:{{color}};">
									&#8291;
								</span>
								{{/label}}

								{{/tags}}

							</div>
							{{/if}}
							{{#if assignees}}
							<div class="col-sm-6">
								{{#assignees}}
								<div class="assignee-wrapper">
									{{#if initials}}
									<span class="headshot-initials-inline" title="{{tooltip}}">{{initials}}</span>
									{{/if}}
									<span title="{{tooltip}}">{{label}}</span>
								</div>
								{{/assignees}}
							</div>
							{{/if}}
						</div>
						{{/if}}


						{{#if isIssue}}
						<div class="row no-gutters mt-4">
							<div class="col-sm-12">
								<h6>DESCRIPTION</h6>
							</div>
						</div>
						{{/if}}
						<div class="row no-gutters {{#if isIssue}}mt-0{{else}}mt-1{{/if}}">
							<div class="col-sm-12">
								{{#if text}}
									<div class="description">
										{{{text}}}
									</div>
								{{/if}}
							</div>
						</div>

						{{#if externalProvider}}
						<div class="row no-gutters mt-3">
							<div class="col-sm-12">
								<h6>LINKED ISSUES</h6>
							</div>
						</div>
						<div class="row no-gutters mt-0">
							<div class="col-sm-12">
								{{!-- {{externalProvider}} --}}
								<a href="#"
									onclick='event.preventDefault();window.analytics.track("Opened Issue", { Service: "{{externalProvider}}" }); window.open("{{externalProviderUrl}}", "_blank")'>
									{{externalProviderUrl}}
								</a>
							</div>
						</div>
						{{/if}}
						{{#if relatedCodemarks}}
						<div class="row no-gutters mt-3">
							<div class="col-sm-12">
								<h6>RELATED</h6>
							</div>
						</div>
						<div class="row no-gutters mt-0">
							<div class="col-sm-12">
								{{#relatedCodemarks}}
								<div class="related-codemark">
								<a href="{{url}}" class="related-codemark-link">
									 {{title}}
									<span class="related-codemark-file">{{file}}</span></a>
								</div>
								{{/relatedCodemarks}}
							</div>
						</div>
						{{/if}}

						{{/if}}

						{{#if showComment}}
						{{#if whenCreated}}
						<div class="row no-gutters mt-3">
							<div class="col-sm-12">
								<h6>ORIGINAL CODE</h6>
							</div>
						</div>
						<div class="row no-gutters mt-0">
							<div class="col-sm-12">
								{{#whenCreated}}
								<span class="monospace">
									{{#if branchWhenCreated}}
									<span title="branch">
										<span class="icon">
										<svg xmlns="http://www.w3.org/2000/svg" width="10" height="16" viewBox="0 0 10 16">
											<path fill-rule="evenodd"
												d="M10 5c0-1.11-.89-2-2-2a1.993 1.993 0 0 0-1 3.72v.3c-.02.52-.23.98-.63 1.38-.4.4-.86.61-1.38.63-.83.02-1.48.16-2 .45V4.72a1.993 1.993 0 0 0-1-3.72C.88 1 0 1.89 0 3a2 2 0 0 0 1 1.72v6.56c-.59.35-1 .99-1 1.72 0 1.11.89 2 2 2 1.11 0 2-.89 2-2 0-.53-.2-1-.53-1.36.09-.06.48-.41.59-.47.25-.11.56-.17.94-.17 1.05-.05 1.95-.45 2.75-1.25S8.95 7.77 9 6.73h-.02C9.59 6.37 10 5.73 10 5zM2 1.8c.66 0 1.2.55 1.2 1.2 0 .65-.55 1.2-1.2 1.2C1.35 4.2.8 3.65.8 3c0-.65.55-1.2 1.2-1.2zm0 12.41c-.66 0-1.2-.55-1.2-1.2 0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2 0 .65-.55 1.2-1.2 1.2zm6-8c-.66 0-1.2-.55-1.2-1.2 0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2 0 .65-.55 1.2-1.2 1.2z" />
											</svg>
											</span>
										{{branchWhenCreated}}</span>
									{{/if}}
									{{#if commitHashWhenCreated}}
										<span class="icon">
											<svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16">
												<path fill-rule="evenodd"
													d="M10.86 7c-.45-1.72-2-3-3.86-3-1.86 0-3.41 1.28-3.86 3H0v2h3.14c.45 1.72 2 3 3.86 3 1.86 0 3.41-1.28 3.86-3H14V7h-3.14zM7 10.2c-1.22 0-2.2-.98-2.2-2.2 0-1.22.98-2.2 2.2-2.2 1.22 0 2.2.98 2.2 2.2 0 1.22-.98 2.2-2.2 2.2z" />
												</svg>
										</span>
									<span title="commit hash">{{commitHashWhenCreated}}</span>
									{{/if}}
								</span>
								{{/whenCreated}}
							</div>
						</div>
						{{/if}}
						{{/if}}

						<div class="row no-gutters {{#if showComment}}mt-4{{else}}mt-1{{/if}}">
							<div class="col-sm-12">
								<div class="row no-gutters">
									<div class="col-sm-11">
									{{#if file}}
									<div class="file" title="{{file}}">{{file}}</div>
									{{/if}}
									</div>
									<div class="col-sm-1">
									<div data-action-code-controls="{{markerId}}" class="code-controls float-right" style="display:none; padding-top:0px;">
										<a href="#" class="code-control" title="expand code" data-action-expand="{{markerId}}">
											<svg class="octicon octicon-unfold" viewBox="0 0 14 16" version="1.1" width="14" height="16" aria-hidden="true">
												<path fill-rule="evenodd"
													d="M11.5 7.5L14 10c0 .55-.45 1-1 1H9v-1h3.5l-2-2h-7l-2 2H5v1H1c-.55 0-1-.45-1-1l2.5-2.5L0 5c0-.55.45-1 1-1h4v1H1.5l2 2h7l2-2H9V4h4c.55 0 1 .45 1 1l-2.5 2.5zM6 6h2V3h2L7 0 4 3h2v3zm2 3H6v3H4l3 3 3-3H8V9z">
												</path>
											</svg>
										</a>
									</div>
									</div>
								</div>
							</div>

							<div class="col-sm-12">
								<div class="code-wrapper" style="max-height:275px;" data-action-expand-id="{{markerId}}">
									{{#if codeStartingLineNumber}}
									<code class="prettyprint linenums:{{codeStartingLineNumber}}">{{{code}}}</code>
									{{/if}}
									{{^codeStartingLineNumber}}
									<code class="prettyprint">{{{code}}}</code>
									{{/codeStartingLineNumber}}
								</div>
							</div>
						</div>
					</div>
					<div class="row no-gutters mt-3">
						<div class="col-xl-5 col-lg-6 col-md-12 col-sm-12 col-xs-12 mb-2">
							<div class="btn-group ide-list btn-block" style="white-space:nowrap;">
								<a href="#" class="btn btn-sm dropdown-toggle dropdown-toggle-split form-control"
									data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
									<span class="sr-only">Toggle Dropdown</span>
								</a>
								<div class="dropdown-menu dropdown-menu-right" id="ide-list-items">
									{{#ides}}
									{{#if ideName}}
									<a class="dropdown-item" href="#" data-ide="" data-ide-name="{{ideName}}"
										data-ide-moniker="{{moniker}}" data-ide-protocol="{{protocol}}"
										data-ide-download-url="{{downloadUrl}}">{{ideName}}</a>
									{{/if}}
									{{^ideName}}
									<div class="dropdown-divider"></div>
									{{/ideName}}
									{{/ides}}
								</div>
							</div>
						</div>

						<div class="col-xl-7 col-lg-6 col-md-12 col-sm-12 col-xs-12">
							{{#if hasProviderButtons}}
							<div class="float-lg-right float-xl-right">
								{{#if codeProvider}}
								<a href="{{codeProviderUrl}}" data-code-provider="" target="_blank" class="btn btn-sm btn-block form-control btn-open-in">Open
									on {{codeProvider}}</a>
								{{/if}}
							</div>
							{{/if}}
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
	</div>
	<script>
		$(function () {
			var isExpanded;
			$('[data-code-provider=""]').click(function(e) {
				window.analytics.track("Opened Code", { Host: "{{codeProvider}}" })
			})

			$('[data-action-expand]').click(function (e) {
				e.preventDefault();

				var $this = $(this);
				var val = $this.attr("data-action-expand");
				if (val) {
					var target = $('[data-action-expand-id="' + val + '"]');
					if (target && target.length) {
						if (target.css('max-height') !== 'none') {
							isExpanded = true;
							target.css('max-height', 'none');
							$this.html('<svg class="octicon octicon-fold" viewBox="0 0 14 16" version="1.1" width="14" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7 9l3 3H8v3H6v-3H4l3-3zm3-6H8V0H6v3H4l3 3 3-3zm4 2c0-.55-.45-1-1-1h-2.5l-1 1h3l-2 2h-7l-2-2h3l-1-1H1c-.55 0-1 .45-1 1l2.5 2.5L0 10c0 .55.45 1 1 1h2.5l1-1h-3l2-2h7l2 2h-3l1 1H13c.55 0 1-.45 1-1l-2.5-2.5L14 5z"></path></svg>').attr('title', 'collapse code');
						}
						else {
							isExpanded = false;
							target.css('max-height', '275px');
							$this.html('<svg class="octicon octicon-unfold" viewBox="0 0 14 16" version="1.1" width="14" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M11.5 7.5L14 10c0 .55-.45 1-1 1H9v-1h3.5l-2-2h-7l-2 2H5v1H1c-.55 0-1-.45-1-1l2.5-2.5L0 5c0-.55.45-1 1-1h4v1H1.5l2 2h7l2-2H9V4h4c.55 0 1 .45 1 1l-2.5 2.5zM6 6h2V3h2L7 0 4 3h2v3zm2 3H6v3H4l3 3 3-3H8V9z"></path></svg>').attr('title', 'expand code');
						}
					}
				}
			})

			var toggleCodeControls = function(){
				var wrapper = $('.code-wrapper');
				if (wrapper && wrapper.length) {
					var $control = $('[data-action-code-controls="{{markerId}}"]');
					if (wrapper[0].clientHeight < wrapper[0].scrollHeight) {
						$control.show();
					}
					else if(!isExpanded) {
						$control.hide();
					}
				}
			}
			$(window).resize(function () {
				toggleCodeControls();
			});

			toggleCodeControls();
		})
	</script>
	<script>
		(function (f) { if (typeof exports === "object" && typeof module !== "undefined") { module.exports = f() } else if (typeof define === "function" && define.amd) { define([], f) } else { var g; if (typeof window !== "undefined") { g = window } else if (typeof global !== "undefined") { g = global } else if (typeof self !== "undefined") { g = self } else { g = this } g.protocolCheck = f() } })(function () {
			var define, module, exports; return (function e(t, n, r) { function s(o, u) { if (!n[o]) { if (!t[o]) { var a = typeof require == "function" && require; if (!u && a) return a(o, !0); if (i) return i(o, !0); var f = new Error("Cannot find module '" + o + "'"); throw f.code = "MODULE_NOT_FOUND", f } var l = n[o] = { exports: {} }; t[o][0].call(l.exports, function (e) { var n = t[o][1][e]; return s(n ? n : e) }, l, l.exports, e, t, n, r) } return n[o].exports } var i = typeof require == "function" && require; for (var o = 0; o < r.length; o++)s(r[o]); return s })({
				1: [function (require, module, exports) {
					function _registerEvent(target, eventType, cb) {
						if (target.addEventListener) {
							target.addEventListener(eventType, cb);
							return {
								remove: function () {
									target.removeEventListener(eventType, cb);
								}
							};
						} else {
							target.attachEvent(eventType, cb);
							return {
								remove: function () {
									target.detachEvent(eventType, cb);
								}
							};
						}
					}

					function _createHiddenIframe(target, uri) {
						var iframe = document.createElement("iframe");
						iframe.src = uri;
						iframe.id = "hiddenIframe";
						iframe.style.display = "none";
						target.appendChild(iframe);

						return iframe;
					}

					function _createDetachedHiddenIframe() {
						var iframe = document.createElement("iframe");
						iframe.id = "hiddenDetachedIframe";
						iframe.style.display = "none";
						return iframe;
					}

					function openUriWithHiddenFrame(uri, failCb, successCb) {

						var timeout = setTimeout(function () {
							failCb();
							handler.remove();
						}, 1000);

						var iframe = document.querySelector("#hiddenIframe");
						if (!iframe) {
							iframe = _createHiddenIframe(document.body, "about:blank");
						}

						var handler = _registerEvent(window, "blur", onBlur);

						function onBlur() {
							clearTimeout(timeout);
							handler.remove();
							successCb();
						}

						iframe.contentWindow.location.href = uri;
					}

					function openUriWithTimeoutHack(uri, failCb, successCb) {

						var timeout = setTimeout(function () {
							failCb();
							handler.remove();
						}, 1000);

						//handle page running in an iframe (blur must be registered with top level window)
						var target = window;
						while (target != target.parent) {
							target = target.parent;
						}

						var handler = _registerEvent(target, "blur", onBlur);

						function onBlur() {
							clearTimeout(timeout);
							handler.remove();
							successCb();
						}

						window.location = uri;
					}

					function openUriUsingFirefox(uri, failCb, successCb) {
						openUriUsingIE10InWindows7(uri, failCb, successCb);
						return;
						var iframe = document.querySelector("#hiddenIframe");

						if (!iframe) {
							iframe = _createHiddenIframe(document.body, "about:blank");
						}

						try {
							iframe.contentWindow.location.href = uri;
							successCb();
						} catch (e) {
							if (e.name == "NS_ERROR_UNKNOWN_PROTOCOL") {
								failCb();
							}
						}
					}

					function openUriUsingFirefox2(uri, failCb, successCb) {
						var worked;
						var iframe = document.querySelector("#hiddenDetachedIframe");
						var attached;
						if (iframe) {
							iframe.remove();
						}
						iframe = _createDetachedHiddenIframe(uri);
						iframe.style.width = "333px";
						iframe.style.height = "333px";
						iframe.src = "about:blank";
						try {

							var onblur = function () {
								worked = true;
								console.log('blurred');
								iframe.removeEventListener('blur', onblur, false);
							}

							iframe.addEventListener("blur", onblur, false);
							document.body.appendChild(iframe);
							var i = 0;
							var interval = setInterval(function () {
								console.log(document.activeElement);
								if (i === 39) {
									console.log('stopping');
									clearInterval(interval);
									failCb();
									return;
								}
								if (worked) {
									console.log('worked');
									clearInterval(interval);
									successCb();
								}
								i++;
							}, 100);


							iframe.contentWindow.location.href = uri;
						} catch (e) {
							failCb();
						}
					}

					function openUriUsingIEInOlderWindows(uri, failCb, successCb) {
						if (getInternetExplorerVersion() === 10) {
							openUriUsingIE10InWindows7(uri, failCb, successCb);
						} else if (getInternetExplorerVersion() === 9 || getInternetExplorerVersion() === 11) {
							openUriWithHiddenFrame(uri, failCb, successCb);
						} else {
							openUriInNewWindowHack(uri, failCb, successCb);
						}
					}

					function openUriUsingIE10InWindows7(uri, failCb, successCb) {
						var timeout = setTimeout(failCb, 1000);
						window.addEventListener("blur", function () {
							clearTimeout(timeout);
							successCb();
						});

						var iframe = document.querySelector("#hiddenIframe");
						if (!iframe) {
							iframe = _createHiddenIframe(document.body, "about:blank");
						}
						try {
							iframe.contentWindow.location.href = uri;
						} catch (e) {
							failCb();
							clearTimeout(timeout);
						}
					}

					function openUriInNewWindowHack(uri, failCb, successCb) {
						var myWindow = window.open('', '', 'width=0,height=0');

						myWindow.document.write("<iframe src='" + uri + "'></iframe>");

						setTimeout(function () {
							try {
								myWindow.location.href;
								myWindow.setTimeout("window.close()", 1000);
								successCb();
							} catch (e) {
								myWindow.close();
								failCb();
							}
						}, 1000);
					}

					function openUriWithMsLaunchUri(uri, failCb, successCb) {
						navigator.msLaunchUri(uri,
							successCb,
							failCb
						);
					}

					function checkBrowser() {
						var isOpera = !!window.opera || navigator.userAgent.indexOf(' OPR/') >= 0;
						var ua = navigator.userAgent.toLowerCase();
						return {
							isOpera: isOpera,
							isFirefox: typeof InstallTrigger !== 'undefined',
							isSafari: (~ua.indexOf('safari') && !~ua.indexOf('chrome')) || Object.prototype.toString.call(window.HTMLElement).indexOf('Constructor') > 0,
							isIOS: /iPad|iPhone|iPod/.test(navigator.userAgent) && !window.MSStream,
							isChrome: !!window.chrome && !isOpera,
							isIE: /*@cc_on!@*/false || !!document.documentMode // At least IE6
						}
					}

					function getInternetExplorerVersion() {
						var rv = -1;
						if (navigator.appName === "Microsoft Internet Explorer") {
							var ua = navigator.userAgent;
							var re = new RegExp("MSIE ([0-9]{1,}[\.0-9]{0,})");
							if (re.exec(ua) != null)
								rv = parseFloat(RegExp.$1);
						}
						else if (navigator.appName === "Netscape") {
							var ua = navigator.userAgent;
							var re = new RegExp("Trident/.*rv:([0-9]{1,}[\.0-9]{0,})");
							if (re.exec(ua) != null) {
								rv = parseFloat(RegExp.$1);
							}
						}
						return rv;
					}

					module.exports = function (uri, failCb, successCb, unsupportedCb) {
						function failCallback() {
							failCb && failCb();
						}

						function successCallback() {
							successCb && successCb();
						}

						if (navigator.msLaunchUri) { //for IE and Edge in Win 8 and Win 10
							openUriWithMsLaunchUri(uri, failCb, successCb);
						} else {
							var browser = checkBrowser();

							if (browser.isFirefox) {
								openUriUsingFirefox(uri, failCallback, successCallback);
							} else if (browser.isChrome || browser.isIOS) {
								openUriWithTimeoutHack(uri, failCallback, successCallback);
							} else if (browser.isIE) {
								openUriUsingIEInOlderWindows(uri, failCallback, successCallback);
							} else if (browser.isSafari) {
								openUriWithHiddenFrame(uri, failCallback, successCallback);
							} else {
								unsupportedCb();
								//not supported, implement please
							}
						}
					}

				}, {}]
			}, {}, [1])(1)
		});
	</script>

	<script>
		$(function () {
			function getCookie(cname) {
				var name = cname + "=";
				var decodedCookie = decodeURIComponent(document.cookie);
				var ca = decodedCookie.split(';');
				for (var i = 0; i < ca.length; i++) {
					var c = ca[i];
					while (c.charAt(0) == ' ') {
						c = c.substring(1);
					}
					if (c.indexOf(name) == 0) {
						return c.substring(name.length, c.length);
					}
				}
				return "";
			}

			function createSelected(el){
				var $thing = $(el.outerHTML)
				.removeClass('dropdown-item').addClass('selected-ide btn btn-sm btn-block form-control btn-open-in').on('click', cb);
				$thing.html("Open in "+ $thing.html());
				return $thing;
			}

			function setSelected(moniker) {
				var u = $('#ide-list-items').find('[data-ide-moniker="' + moniker + '"]');
				if (u.length) {
					$('.ide-list .selected-ide').remove();
					$('.ide-list').prepend(
					 createSelected(u[0])
					)
				}
				setCookie('cs__ide-mru--{{repoId}}', moniker);
			}

			function cb(e) {
				e.preventDefault();

				var protocolStart = $(this).attr('data-ide-protocol');
				var ideName = $(this).attr('data-ide-name');
				var moniker = $(this).attr('data-ide-moniker');
				var downloadUrl = $(this).attr('data-ide-download-url');
				var protocol = protocolStart + 'codemark/{{codemarkId}}/open?repoId={{repoId}}';

				setSelected(moniker);

				if (moniker.indexOf('jb-') === 0) {
					var fileName = '{{rawFileName}}';
					protocol+=`&controller=codemark&id={{codemarkId}}&action=open&file=${encodeURIComponent(fileName)}`;
				}

				var $existingAlert = $('.alert');
				if ($existingAlert.length) {
					$existingAlert.alert('close');
				}

				var timeout = setTimeout(function () {
					createBanner(ideName, protocolStart, downloadUrl);
				}, 200);

				window.protocolCheck(protocol,
					function () {
						//fail
						console.log(`CodeStream: failed for Moniker=${moniker} Path=${protocol} `);
						window.analytics.track("Opened in IDE", { IDE: moniker, "Protocol Handled": false });
					}, function () {
						//success
						console.log(`CodeStream: success for Moniker=${moniker} Path=${protocol}`);
						clearTimeout(timeout);

						window.analytics.track("Opened in IDE", { IDE: moniker, "Protocol Handled": true });
					});
			}

			function createBanner(ide, protocol, downloadUrl) {
				var $existingAlert = $('.alert');
				if ($existingAlert.length) {
					$existingAlert.alert('close');
				}
				var message = `Launching ${ide}... If nothing happens, download the <a href='${downloadUrl}'>CodeStream</a> extension for ${ide} and`;

				if (protocol.indexOf('jetbrains') > -1) {
					message += ' the <a href="https://www.jetbrains.com/toolbox/app/" target="_blank">Jetbrains Toolbox App</a> and';
				}
				message += ' try again';

				var $alert = $(`<div class="alert alert-warning alert-dismissible fade show text-center" role="alert">
				${message}
				<button type = "button" class="close" data-dismiss="alert" aria-label="Close" >
					<span aria-hidden="true">&times;</span>
				</button >
			</div>`);
				$('#alert-wrapper').append($alert);
				$alert.show();
			}

			function createMessage(message) {
				var $existingAlert = $('.alert');
				if ($existingAlert.length) {
					$existingAlert.alert('close');
				}

				var $alert = $(`<div class="alert alert-info alert-dismissible fade show text-center" role="alert">
				${message}
				<button type = "button" class="close" data-dismiss="alert" aria-label="Close" >
					<span aria-hidden="true">&times;</span>
				</button >
			</div>`);
				$('#alert-wrapper').append($alert);
				$alert.show();
			}

			function setCookie(cname, cvalue, exdays) {
				var d = new Date();
				d.setTime(d.getTime() + (exdays * 24 * 60 * 60 * 1000));
				var expires = "expires=" + d.toUTCString();
				document.cookie = cname + "=" + cvalue + ";" + expires + ";path=/";
			}



			var mru = getCookie("cs__ide-mru--{{repoId}}");
			if (mru) {
				var u = $('#ide-list-items').find('[data-ide-moniker="' + mru + '"]');
				if (u && u.length) {
					$('.ide-list').prepend(createSelected(u[0]));
				}
				else {
					var a = $('#ide-list-items').find('a');
					if (a && a.length) {
						$('.ide-list').prepend(createSelected(a[0]));
					}
				}
			}
			else {
				var a = $('#ide-list-items').find('a');
				if (a && a.length) {
					$('.ide-list').prepend(createSelected(a[0]));
				}
			}

			$('[data-ide=""]').on('click', cb);
			var isDefault;
			var launcher = encodeURIComponent('{{launchIde}}').replace(/'/g, "''");
			if (launcher) {
				var item;
				if (launcher === "default") {
					item = mru;
					isDefault = true;
				}
				else {
					item = launcher;
				}
				var u = $('#ide-list-items').find('[data-ide-moniker="' + item + '"]');
				if (u && u.length){
					u.click();
				}
				else if (isDefault) {
					createMessage("To open this codemark in your IDE, please select from the list below");
				}
			}
		})
	</script>
</body>

</html>
